<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Profile - Brand</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <style>
        .table-hover {
            cursor: default;
        }

        .table-hover tbody tr {
            cursor: pointer;
        }
    </style>
</head>

<body id="page-top">
    <div style="
  position: fixed;
  display: flex;
    width: 100%;
    height:100%;
    background:white;
    z-index:5000;" id="loadingScreen">
        <div class="spinner-border text-primary" style="margin: auto;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <div id="wrapper">
        <div class="wrapper">

        </div>
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">
                <nav class="navbar navbar-light navbar-expand-md"
                    style="padding-top: 10px;padding-bottom: 10px;margin-bottom: 20px;background: linear-gradient(to right, #00b4db, #0083b0);">
                    <div class="container-fluid"><a class="navbar-brand" href="#"
                            style="color: rgb(255,255,255);">YTUSepeti</a><button data-toggle="collapse"
                            class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle
                                navigation</span><span class="navbar-toggler-icon"></span></button>
                        <div class="collapse navbar-collapse" id="navcol-1">
                            <ul class="nav navbar-nav">
                                <li class="nav-item" role="presentation"><a class="nav-link active"
                                        href="#">Categories</a></li>
                                <li class="nav-item" role="presentation"><a class="nav-link" href="#">Products</a></li>
                                <li class="nav-item" role="presentation"><a class="nav-link" href="#">Others</a></li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="container-fluid">
                    <h3 class="text-dark mb-4" style="font-size: 24pt;">All Brands</h3>
                    <div class="row mb-3">
                        <div class="col-lg-8 col-lg-12">
                            <div class="row">
                                <div class="col">
                                    <div class="card shadow">
                                        <div class="card-header py-3" style="font-size: 16pt !important;">
                                            <div class="row">
                                                <div class="col">
                                                    <p class="text-primary m-0 font-weight-bold">Brand List</p>
                                                </div>
                                                <div class="col">
                                                    <div class="btn-toolbar float-right">
                                                        <div class="col-md-6">
                                                            <button class="btn btn-primary" id="findMinMax"
                                                                type="button">Min Max</button>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <button class="btn btn-primary" id="calcDeviation"
                                                                type="button">Deviation</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="table-responsive table mt-2" id="dataTable" role="grid"
                                                aria-describedby="dataTable_info">
                                                <table class="table table-hover dataTable my-0" id="dataTable">
                                                    <thead>
                                                        <tr>
                                                            <th>BrandName</th>
                                                            <th>Min Pricing Product</th>
                                                            <th>Max Pricing Product</th>
                                                            <th>Standart Deviation</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="brandsBody">
                                                        <tr>
                                                            <td>Product 2</td>
                                                            <td>Brand 2<br></td>
                                                            <td>400</td>
                                                            <td>3.14<br></td>
                                                        </tr>
                                                        <tr>
                                                            <td>Product 3</td>
                                                            <td>Brand 3<br></td>
                                                            <td>500</td>
                                                            <td>3.14<br></td>
                                                        </tr>
                                                        <tr>
                                                            <td>Product 4</td>
                                                            <td>Brand 4<br></td>
                                                            <td>600</td>
                                                            <td>3.14<br></td>
                                                        </tr>
                                                        <tr>
                                                            <td>Product 5</td>
                                                            <td>Brand 5<br></td>
                                                            <td>700</td>
                                                            <td>3.14<br></td>
                                                        </tr>
                                                    </tbody>
                                                    <tfoot>
                                                        <tr></tr>
                                                    </tfoot>
                                                </table>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12" id="loadingBar" style="display: none;">
                                                    <div class="progress">
                                                        <div class="progress-bar progress-bar-striped progress-bar-animated"
                                                            role="progressbar" style="width: 100%" aria-valuenow="100"
                                                            aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <br>
                                                </div>
                                                <div class="col-md-6 align-self-center">
                                                    <p id="dataTable_info" class="dataTables_info" role="status"
                                                        aria-live="polite">Showing 1 to 5 of 30</p>
                                                </div>
                                                <div class="col-md-6">
                                                    <nav
                                                        class="d-lg-flex justify-content-lg-end dataTables_paginate paging_simple_numbers">
                                                        <ul class="pagination" id="ul-pagination">
                                                            <li class="page-item disabled"><a class="page-link" href="#"
                                                                    aria-label="Previous"><span
                                                                        aria-hidden="true">«</span></a></li>
                                                            <li class="page-item active"><a class="page-link"
                                                                    href="#">1</a></li>
                                                            <li class="page-item"><a class="page-link" href="#">2</a>
                                                            </li>
                                                            <li class="page-item"><a class="page-link" href="#">3</a>
                                                            </li>
                                                            <li class="page-item"><a class="page-link" href="#"
                                                                    aria-label="Next"><span
                                                                        aria-hidden="true">»</span></a></li>
                                                        </ul>
                                                    </nav>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="bg-white sticky-footer">
                <div class="container my-auto">
                    <div class="text-center my-auto copyright"><span style="font-size: 16pt;">Developed By Ömer Aytekin
                            And Caner Kaya</span></div>
                </div>
            </footer>
        </div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
    </div>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/chart.min.js"></script>
    <script src="assets/js/bs-charts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
    <script src="assets/js/theme.js"></script>
    <script>
        host = "http://0.0.0.0:2626/";
        $.urlParam = function (name) {
            var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
            if(results)
                if(Number.isInteger(parseInt(results[1])) && parseInt(results[1]) > 0 && parseInt(results[1]) < 100)
                    return  parseInt(results[1]);
                else
                    return 1;
            else 
                return 1

        }
        var page = $.urlParam('page');

        $.ajax({
            url: host + "get-brands/"+page,
            success: function(data){
                html = "";
                console.log(data)
                if(data == null)
                    window.location = "brands.html"

                page = page - 1 >  Math.floor( data.brandCount/10 ) ? 1:page
                data.brands.forEach(function(brand){
                    html = html + "<tr class='clickable-row' data-href='brand.html?brand=" + brand[0] + "'>";
                    html = html + "<td>" + brand[0] + "</td>" // Brand Name
                    html = html + "<td>" + brand[1] + "(" + brand[2] + "₺)" + "</td>" // Brand Name
                    html = html + "<td>" + brand[3] + "(" + brand[4] + "₺)" + "</td>" // Brand Name
                    html = html + "<td>" + brand[5] + "</td>" // Brand Name
                });
                $("#brandsBody").html(html);
                $(".clickable-row").click(function () {
                    window.location = $(this).data("href");
                });

                // Info bar changed
                showingFrom = (page - 1) * 10 + 1
                showingTo = showingFrom + data.brands.length
                $("#dataTable_info").html("Showing " + showingFrom + " to " + showingTo)



                $("#loadingScreen").attr("style", "display:none");
            }
          });
/*
        $.get(host + "/get-brands", function (data) {
            console.log(data)
            $("#loadingScreen").attr("style", "display:none");
            html = "";
            for (key in data.brands) {
                val = data["brandList"][key];
                console.log(val[0])
                html = html + "<tr class='clickable-row' data-href='brand.html?brand=" + val[0] + "'>";

                for (ind in val) {
                    html = html + "<td>" + val[ind] + "</td>";
                }
                html = html + "</tr>";
            }
            console.log(html);
            $("#brandsBody").html(html);

            $(".clickable-row").click(function () {
                window.location = $(this).data("href");
            });
        })

        $("#findMinMax").click(function () {
            $("#brandsBody").html("Calculating...");
            $("#loadingBar").removeAttr("style");
            $.get(host + "/find-min-max", function (data) {
                html = "";
                for (key in data["brandList"]) {
                    val = data["brandList"][key];
                    console.log(val[0])
                    html = html + "<tr class='clickable-row' data-href='brand.html?brand=" + val[0] + "'>";

                    for (ind in val) {
                        html = html + "<td>" + val[ind] + "</td>";
                    }
                    html = html + "</tr>";
                }
                $("#brandsBody").html(html);
                $("#loadingBar").attr("style", "display:none");
                $(".clickable-row").click(function () {
                    window.location = $(this).data("href");
                });
            });
        });
        $("#calcDeviation").click(function () {
            $("#brandsBody").html("Calculating...");
            $("#loadingBar").removeAttr("style");
            $.get(host + "/calc-deviation", function (data) {
                html = "";
                for (key in data["brandList"]) {
                    val = data["brandList"][key];
                    console.log(val[0])
                    html = html + "<tr class='clickable-row' data-href='brand.html?brand=" + val[0] + "'>";

                    for (ind in val) {
                        html = html + "<td>" + val[ind] + "</td>";
                    }
                    html = html + "</tr>";
                }
                $("#brandsBody").html(html);
                $("#loadingBar").attr("style", "display:none");
                $(".clickable-row").click(function () {
                    window.location = $(this).data("href");
                });
            });

        }); */
    </script>
</body>

</html>